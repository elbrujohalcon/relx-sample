# relx-sample
A repo to demonstrate a relx issue

## The Problem
In this repo you can see that we have a very minimal OTP application.

We will run a single command on it:

```bash
$ rebar3 tar
```

And now we will compare two things.

First the list of files generated by the release (i.e. the files within `_build/default/rel/my`):

```bash
bin
bin/my
bin/my-1.0.0
bin/no_dot_erlang.boot
bin/start_clean.boot
lib
lib/my-1.0.0
lib/my-1.0.0/ebin
lib/my-1.0.0/ebin/my.app
lib/my-1.0.0/src
lib/my-1.0.0/src/my.app.src
my-1.0.0.tar.gz
releases
releases/1.0.0
releases/1.0.0/my.boot
releases/1.0.0/my.rel
releases/1.0.0/my.script
releases/1.0.0/no_dot_erlang.boot
releases/1.0.0/start_clean.boot
releases/1.0.0/sys.config
releases/1.0.0/vm.args
releases/RELEASES
releases/start_erl.data
```

Then the list of files included in the tar.gz file (i.e. `_build/default/rel/my/my-1.0.0.tar.gz`):

```bash
bin
bin/my
bin/my-1.0.0
bin/no_dot_erlang.boot
bin/start_clean.boot
lib
lib/kernel-5.2/...
lib/my-1.0.0
lib/my-1.0.0/ebin
lib/my-1.0.0/ebin/my.app
lib/my-1.0.0/src
lib/my-1.0.0/src/my.app.src
lib/stdlib-3.3/...
releases
releases/1.0.0
releases/1.0.0/my.rel
releases/1.0.0/start.boot
releases/1.0.0/sys.config
releases/1.0.0/vm.args
releases/my.rel
releases/RELEASES
releases/start_erl.data
```

So... This is the comparison:

#### In release but not tar

```bash
my-1.0.0.tar.gz
releases/1.0.0/my.boot
releases/1.0.0/my.script
releases/1.0.0/no_dot_erlang.boot
releases/1.0.0/start_clean.boot
```

#### In tar but not release

```bash
lib/kernel-5.2/...
lib/stdlib-3.3/...
releases/1.0.0/start.boot
releases/my.rel
```

I understand the differences with `my-1.0.0.tar.gz`, `lib/kernel-5.2/...` and `lib/stdlib-3.3/...`, of course.

`my.rel` is a little less obvious, but it's certainly not needed when running the release as `_build/default/rel/my/bin/my console`. So, that's fine.

Now... why do we have different boot scripts in each version? And does that not affect the way releases are run?
